<!-- Agent Form Page -->
<div class="min-h-screen bg-gray-50">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    
    <!-- Page Header -->
    <div class="mb-8">
      <div class="flex items-center gap-4 mb-4">
        <button 
          (click)="onCancel()"
          class="text-gray-600 hover:text-gray-900 transition-colors"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
        </button>
        <h1 class="text-3xl font-bold text-gray-900">
          {{ isEditMode ? 'Edit Agent' : 'Add New Agent' }}
        </h1>
      </div>
      <p class="text-lg text-gray-600">
        {{ isEditMode ? 'Update agent information and commission details' : 'Enter agent information and commission details' }}
      </p>
    </div>

    <!-- Success Alert -->
    <div *ngIf="showSuccessAlert" class="mb-6 bg-green-50 border border-green-200 rounded-md p-4">
      <div class="flex">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-green-400" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <p class="text-sm font-medium text-green-800">{{ alertMessage }}</p>
        </div>
      </div>
    </div>

    <!-- Form -->
    <form (ngSubmit)="onSubmit()" #agentForm="ngForm">
      
      <!-- Basic Information -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Basic Information</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Agent Code -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Agent Code <span class="text-red-500">*</span>
            </label>
            <input 
              type="text" 
              [(ngModel)]="formData.agentCode"
              name="agentCode"
              required
              readonly
              class="w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600 cursor-not-allowed"
            >
          </div>

          <!-- Agent Name -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Agent Name <span class="text-red-500">*</span>
            </label>
            <input 
              type="text" 
              [(ngModel)]="formData.agentName"
              name="agentName"
              required
              placeholder="Enter agent name"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            >
          </div>

          <!-- Company Name -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Company Name
            </label>
            <input 
              type="text" 
              [(ngModel)]="formData.companyName"
              name="companyName"
              placeholder="Enter company name (if applicable)"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            >
          </div>

          <!-- Contact Person -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Contact Person <span class="text-red-500">*</span>
            </label>
            <input 
              type="text" 
              [(ngModel)]="formData.contactPerson"
              name="contactPerson"
              required
              placeholder="Enter contact person name"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            >
          </div>

          <!-- Status -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Status <span class="text-red-500">*</span>
            </label>
            <select 
              [(ngModel)]="formData.status"
              name="status"
              required
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            >
              <option value="active">Active</option>
              <option value="inactive">Inactive</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Contact Information -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Contact Information</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Email -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Email <span class="text-red-500">*</span>
            </label>
            <input 
              type="email" 
              [(ngModel)]="formData.email"
              name="email"
              required
              placeholder="agent@example.com"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            >
          </div>

          <!-- Phone -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Phone <span class="text-red-500">*</span>
            </label>
            <input 
              type="tel" 
              [(ngModel)]="formData.phone"
              name="phone"
              required
              placeholder="+971501234567"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            >
          </div>

          <!-- Alternate Phone -->
          <div class="md:col-span-2">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Alternate Phone
            </label>
            <input 
              type="tel" 
              [(ngModel)]="formData.alternatePhone"
              name="alternatePhone"
              placeholder="+971509876543"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            >
          </div>
        </div>
      </div>

      <!-- Address Information -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Address Information</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Country -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Country <span class="text-red-500">*</span>
            </label>
            <select 
              [(ngModel)]="formData.country"
              name="country"
              required
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            >
              <option value="">Select Country</option>
              <option *ngFor="let country of countries" [value]="country">{{ country }}</option>
            </select>
          </div>

          <!-- City -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              City <span class="text-red-500">*</span>
            </label>
            <input 
              type="text" 
              [(ngModel)]="formData.city"
              name="city"
              required
              placeholder="Enter city"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            >
          </div>

          <!-- Address -->
          <div class="md:col-span-2">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Address <span class="text-red-500">*</span>
            </label>
            <textarea 
              [(ngModel)]="formData.address"
              name="address"
              required
              rows="3"
              placeholder="Enter full address"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            ></textarea>
          </div>
        </div>
      </div>

      <!-- Commission Details -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Commission Details</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Commission Type -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Commission Type <span class="text-red-500">*</span>
            </label>
            <select 
              [(ngModel)]="formData.commissionType"
              name="commissionType"
              required
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            >
              <option value="fixed">Fixed Amount</option>
              <option value="percentage">Percentage</option>
            </select>
          </div>

          <!-- Commission Value -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Commission Value <span class="text-red-500">*</span>
            </label>
            <div class="relative">
              <input 
                type="number" 
                [(ngModel)]="formData.commissionValue"
                name="commissionValue"
                required
                min="0"
                step="0.01"
                [placeholder]="formData.commissionType === 'fixed' ? 'Enter amount in AED' : 'Enter percentage'"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
              >
              <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                <span class="text-gray-500 text-sm">
                  {{ formData.commissionType === 'fixed' ? 'AED' : '%' }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Bank Details -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Bank Details (Optional)</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Bank Name -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Bank Name
            </label>
            <input 
              type="text" 
              [(ngModel)]="formData.bankName"
              name="bankName"
              placeholder="Enter bank name"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            >
          </div>

          <!-- Account Number -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Account Number
            </label>
            <input 
              type="text" 
              [(ngModel)]="formData.accountNumber"
              name="accountNumber"
              placeholder="Enter account number"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            >
          </div>

          <!-- IBAN -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              IBAN
            </label>
            <input 
              type="text" 
              [(ngModel)]="formData.iban"
              name="iban"
              placeholder="AE070331234567890123456"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            >
          </div>

          <!-- SWIFT Code -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              SWIFT Code
            </label>
            <input 
              type="text" 
              [(ngModel)]="formData.swiftCode"
              name="swiftCode"
              placeholder="EBILAEAD"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            >
          </div>
        </div>
      </div>

      <!-- Additional Notes -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Additional Notes</h2>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Notes
          </label>
          <textarea 
            [(ngModel)]="formData.notes"
            name="notes"
            rows="4"
            placeholder="Add any additional notes or comments about this agent..."
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
          ></textarea>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="flex justify-end gap-4">
        <button 
          type="button"
          (click)="onCancel()"
          class="px-6 py-3 border border-gray-300 rounded-md text-gray-700 font-medium hover:bg-gray-50 transition-colors"
        >
          Cancel
        </button>
        <button 
          type="submit"
          [disabled]="!agentForm.form.valid"
          class="px-6 py-3 text-white font-medium rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
          style="background-color: #FF6B00;"
          [style.background-color]="!agentForm.form.valid ? '#9CA3AF' : '#FF6B00'"
        >
          {{ isEditMode ? 'Update Agent' : 'Add Agent' }}
        </button>
      </div>
    </form>

  </div>
</div>